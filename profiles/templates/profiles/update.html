{% load thumbnail %}

<!-- {% block title %}{{ user.username }}{% endblock title %} -->

{% block body %}

<title>{{ user.username }}</title>



<div
    class="mx-auto flex justify-center items-center filter blur-2xl animate-pulse duration-500 transition w-1/5 md:w-3/5 absolute">
    <div class="mt-5 mr-10 flex relative">
        <div class="p-44 rounded-full bg-gradient-to-r to-indigo-100 from-pink-100 absolute top-20 right-0">

        </div>
        <div class="p-44 rounded-full bg-gradient-to-r to-red-100 from-blue-100 absolute md:flex hidden">

        </div>
    </div>
    <!-- Right Side -->
    <div class="flex flex-col absolute top-8 right-10 space-y-4">

        <div class="p-5 rounded-full bg-gradient-to-r to-pink-700 via-red-100 from-indigo-100 absolute right-16 top-10">

        </div>
    </div>
    <div class="flex flex-col absolute bottom-8 right-10 space-y-4">

        <!-- <div class="p-10 rounded-full bg-gradient-to-b to-green from-indigo-100 absolute right-16 bottom-10">

        </div> -->
    </div>
    <!--  Left side -->
    <div class="flex flex-col space-y-4 filter animate-pulse duration-500">
        <!-- <div class="p-10 bg-gradient-to-b to-green-700 from-blue-900 absolute top-20 left-20">

        </div>
        <div class="p-10 bg-gradient-to-b to-green-700 from-blue-900 absolute bottom-20 right-20">

        </div> -->
    </div>
</div>



<div class="flex absolute">
  <div class="flex sticky w-24 -ml-7 md:ml-0 sm:w-auto z-30 md:z-40 ">{% include "base.html" %}</div>
  {% if request.user.is_authenticated %}
  <div class="overflow-hidden shadow w-full h-fit z-50 md:z-30 my-3 ">
      <div class="w-auto bg-cover bg-center h-48"
        style="background-image: url('https://images.unsplash.com/photo-1593642532454-e138e28a63f4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=869&q=80');">
      </div>
      <!-- <img src="https://images.unsplash.com/photo-1593642532454-e138e28a63f4?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=869&q=80" class="bg-cover" /> -->
      <div class="flex justify-center -mt-8">

        {% thumbnail user.profile.image "100x100" crop="center" as im %}

        <img src="{{ im.url }}" alt="" class="rounded-full border-solid border-white border-2 -mt-3">
        {% endthumbnail %}
      </div>
      <div class="text-center px-3 pb-6 pt-2">
        <h3 class="text-black text-sm bold font-sans capitalize">{{ user.username }}</h3>
       
      
       
      </div>
      <div class="flex justify-center pb-3 text-grey-dark">
        <div class="text-center mr-3 border-r pr-3">
          <h2 class="text-md md:text-xl">{{ total_posts }}</h2>
          <span class="text-md md:text-md">Posts</span>
        </div>
        <div class="text-center">
          <h2 class="text-md md:text-xl">{{ total_followers }}</h2>
          <span class="text-md md:text-md">Followers</span>
        </div>
      </div>


      <!-- TODO:About -->
      <div class="my-3 text-gray-700">
        <div class="flex justify-between items-center">
          <div class="text-sm md:text-2xl pl-1 md:pl-3 font-bold ">Personal Details</div>
          <a class="text-end md:text-cente pr-1 md:pr-3" href="{% url 'profiles:reset' %}"><span class="text-sm md:text-base">Reset
              Password</span></a>
        </div>
        <hr>
        <div class="grid lg:grid-cols-2 text-sm mx-1 md:mx-3">
          <div class="grid grid-cols-2 mt-3 self-center">
            <div class="px-4 py-2 font-semibold">User Name</div>
            <input class="px-1 md:px-4 py-1 md:py-2 text-sm md:text-base border-2 " type="text" name="username"
              value="{{user.username}}" maxlength="150" required id="id_username">
          </div>
          <div class="grid grid-cols-2 mt-3">
            <div class="px-4 py-2 font-semibold self-center">Email.</div>
            <div class="px-1 md:px-4 py-2 ">
              <a class="px-1 md:px-4 py-1 md:py-2 text-sm md:text-base mx-0 md:mx-0 break-words"
                href="mailto:{{user.email}}">{{user.email}}</a><br>
                <a class="px-1 md:px-4 py-1 md:py-2 text-sm md:text-base mx-0 md:mx-2" href="{% url 'profiles:reset' %}"><span class="text-sm md:text-base">Reset
                  Password</span></a>
            </div>
         
           
           
          </div>
        </div>

        <!-- TODO:Personal Details -->
        <div class="my-3 text-gray-700">
         



          <form method="post">
            {% csrf_token %}
            <!-- {{ form.as_p }} -->
            <div class="grid lg:grid-cols-2 text-sm mx-1 md:mx-3">
              <input type="hidden" name="csrfmiddlewaretoken"
                value="oKAfwfw5zx7PyCJ1uxRDg2RhoQep9YzkIeII9qv0SJDp3sb1cCC55EdqMUWYkpLg">
              <p class="hidden"><label for="id_user">User:</label>
                <select name="user" required id="id_user">
                  <option value="">---------</option>

                  <option value="1" selected>{{user.profile.user}}</option>



                </select></p>
              <div class="grid grid-cols-2 mt-3 content-center">
                <label class="px-4 py-2 font-semibold" for="id_image">Image:</label>
                <p class=" py-2 font-semibold self-center">Currently:
                  <a class="text-xs break-words" href="{{user.profile.image}}">{{user.profile.image}}</a></p>

              </div>
              <div class="grid grid-cols-2 mt-3 content-center">
                <p class="px-4 py-2 font-semibold">Change:
                  <input type="file" name="image" id="id_image"></p>

              </div>
              <div class="grid grid-cols-2 mt-3 h-auto">
                <label class="px-4 py-2 font-semibold" for="id_gender">Gender:</label>
                <input class="px-1 md:px-4 py-1 md:py-2 text-sm md:text-base mx-2 md:mx-0 border-2 h-fit" type="text"
                  name="gender" value="{{user.profile.gender}}" maxlength="100" required id="id_gender">
              </div>
              <div class="grid grid-cols-2 mt-3">
                <label class="px-4 py-2 font-semibold" for="id_contact">Contact:</label>
                <input class="px-1 md:px-4 py-1 md:py-2 text-sm md:text-base mx-2 md:mx-0 border-2" type="number"
                  name="contact" value="{{user.profile.contact}}" required id="id_contact">
              </div>
              <div class="grid grid-cols-2 mt-3">
                <div class="px-4 py-2 font-semibold">Email.</div>
                <div class=" py-2">
                  <a class="px-1 md:px-4 py-1 md:py-2 text-sm md:text-base mx-2 md:mx-0 break-words"
                    href="mailto:{{user.email}}">{{user.email}}</a>
                </div>
              </div>
              <div class="grid grid-cols-2 mt-3">
                <label class="px-4 py-2 font-semibold" for="id_place">Place:</label>
                <input class="px-1 md:px-4 py-1 md:py-2 text-sm md:text-base mx-2 md:mx-0 border-2" type="text"
                  name="place" value="{{user.profile.place}}" maxlength="100" required id="id_place">
              </div>
              <div class="grid grid-cols-2 mt-3">
                <label class="px-4 py-2 font-semibold" for="id_country">Country:</label>
                <input class="px-1 md:px-4 py-1 md:py-2 text-sm md:text-base mx-2 md:mx-0 border-2" type="text"
                  name="country" value="{{user.profile.country}}" maxlength="100" required id="id_country">
              </div>



              <!-- <input class="text-sm md:text-base px-0 md:px-3 " value="Update Details" type="submit" /> -->
            </div>
            <div class="grid mt-3 justify-center self-center">
              <button
                class="bg-blue-700 hover:bg-blue-300 text-white text-sm md:text-md font-bold w-auto p-2 focus:outline-none focus:shadow-outline rounded align-center"
                type="submit">Update Details</button>
            </div>

          </form>

       
        </div>
      </div>



    </div>
    {% else %}
    <div class="mt-3 text-sm">Login to Update this user</div>
    {% endif %}
  </div>
  {% endblock body%}